!function(){"use strict";var e=class{constructor(e,t,s){this.name=e.name,this.link=e.link,this._cardSelector=t,this._handleImageClick=s}_getTemplate(){return document.querySelector("#card-template").content.firstElementChild.cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__title-text").textContent=this.name,this._cardImageElement.src=this.link,this._cardImageElement.alt=this.name,this._element}_setEventListeners(){this._cardLikeButton=this._element.querySelector(".card__fav-icon"),this._cardDeleteButton=this._element.querySelector(".card__trash-icon"),this._cardImageElement=this._element.querySelector(".card__image"),this._cardLikeButton.addEventListener("click",(()=>{this._handleLikeButton()})),this._cardDeleteButton.addEventListener("click",(()=>{this._handleDeleteButton()})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this)}))}_handleDeleteButton(){this._element.remove(),this._element=null}_handleLikeButton(){this._cardLikeButton.classList.toggle("card__fav-icon_active")}},t=class{constructor(e,t){this._config=e,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}_showInputError(e,t){const s=this._formElement.querySelector(`.${e.id}-error-message`);e.classList.add(this._config.inputErrorClass),s.classList.add(this._config.errorClass),s.textContent=t}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error-message`);t&&(e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass))}_checkValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}disableButton(){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.setAttribute("disabled","")}_enableButton(){this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.removeAttribute("disabled")}_handleInput(e){this._toggleButtonState(),this._checkValidity(e)}_setEventListeners(){this.disableButton(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._handleInput.bind(this)(e)}))}))}enableValidation(){this._setEventListeners()}resetValidation(){this.disableButton(),this._inputList.forEach((e=>{this._hideInputError(e)}))}};class s{constructor(e){let{popupSelector:t}=e;this._popup=document.querySelector(t),this._modalIsOpenedClassName="modal_opened",this._escPressed=!1,this._listenerSet=!1,this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add(this._modalIsOpenedClassName),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove(this._modalIsOpenedClassName),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._closeModalWindowBtn=this._popup.querySelector(".modal__close-btn"),this._closeModalWindowBtn.addEventListener("click",(()=>{this.close()})),this._popup.addEventListener("click",(e=>{const t=this.close.bind(this);e.target.classList.contains("modal")&&t()}))}_handleEscClose(e){"Escape"===e.key&&this.close()}}var n=class extends s{constructor(e,t,s){super({popupSelector:e}),this._form=document.forms[t],this._handleFormSubmit=s,this._inputList=this._form.querySelectorAll("input")}_getInputValues(){return this._inputValues={},this._inputList.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}resetForm(){this._form.reset()}};const i=document.querySelector(".explorer__edit-button"),o=document.querySelector(".explorer__add-button"),r=new class{constructor(e,t){this._name=document.querySelector(e),this._about=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._name.textContent=t,this._about.textContent=s}}(".explorer__name",".explorer__description"),a={};var l;l={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error-message_active"},Array.from(document.querySelectorAll(l.formSelector)).forEach((e=>{const s=new t(l,e),n=e.getAttribute("name");a[n]=s,s.enableValidation()}));const c=new class extends s{constructor(e){super({popupSelector:e}),this._image=this._popup.querySelector(".modal__image"),this._imageLable=this._popup.querySelector(".modal__image-lable")}open(e,t){this._image.src=e,this._image.alt=t,this._imageLable.textContent=t,super.open()}}(".modal_type_show-image"),u=e=>{c.open(e.link,e.name)};c.setEventListeners();const _=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._targetNode=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this.addItem(e)}))}addItem(e){const t=this._renderer(e);this._targetNode.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:t=>new e(t,".card",u).generateCard()},".cards__list");_.renderItems();const d=new n(".modal_type_add-card","card-form",(e=>{_.addItem(e),d.resetForm(),d.close(),a["card-form"].disableButton()}));d.setEventListeners(),o.addEventListener("click",(()=>{d.open()}));const m=new n(".modal_type_profile","profile-form",(function(e){r.setUserInfo(e),m.close()}));m.setEventListeners(),i.addEventListener("click",(()=>{a["profile-form"].resetValidation();const e=r.getUserInfo();m.setInputValues(e),m.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTXFFLEVBQWNuQyxFQUFTSyxjQUM3QjRCLEVBQWlCdkMsZUFBZXlDLEdBQ2hDRixFQUFpQjFELE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RyaXBsZV90ZW4vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3RyaXBsZV90ZW4vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3RyaXBsZV90ZW4vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly90cmlwbGVfdGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly90cmlwbGVfdGVuLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly90cmlwbGVfdGVuLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3RyaXBsZV90ZW4vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly90cmlwbGVfdGVuLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vdHJpcGxlX3Rlbi8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMubmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLmxpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZS10ZXh0XCIpLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5uYW1lO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZmF2LWljb25cIik7XG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1pY29uXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG5cbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpO1xuICAgIH0pO1xuICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbigpO1xuICAgIH0pO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQnV0dG9uKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7IC8vcmVtb3ZlIHRoZSBsaW5rIHRvIHRoZSBET00gZWxlbWVudCBhZnRlciBkZWxldGluZyBhIGNhcmQuIEl0IGhlbHBzIGphdmFzY3JpcHQgZ2FyYmFnZSBjb2xsZWN0b3IuXG4gIH1cblxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fZmF2LWljb25fYWN0aXZlXCIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yLW1lc3NhZ2VgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvci1tZXNzYWdlYFxuICAgICk7XG4gICAgaWYgKGVycm9yRWxlbWVudCkge1xuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX2NoZWNrVmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICB0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSA/IHRoaXMuZGlzYWJsZUJ1dHRvbigpIDogdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gIH1cblxuICBkaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgLy9hZGQgYXR0cmlidXRlIFwiZGlzYWJsZWRcIiB0byBwcmV2ZW50IHN1Ym1pdCBvbiBcIkVudGVyXCJcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiXCIpO1xuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gIH1cblxuICBfaGFuZGxlSW5wdXQoaW5wdXRFbGVtZW50KSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRIYW5kbGUgPSB0aGlzLl9oYW5kbGVJbnB1dC5iaW5kKHRoaXMpO1xuICAgICAgICBjdXJyZW50SGFuZGxlKGlucHV0RWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX21vZGFsSXNPcGVuZWRDbGFzc05hbWUgPSBcIm1vZGFsX29wZW5lZFwiO1xuICAgIHRoaXMuX2VzY1ByZXNzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9saXN0ZW5lclNldCA9IGZhbHNlO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCh0aGlzLl9tb2RhbElzT3BlbmVkQ2xhc3NOYW1lKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX21vZGFsSXNPcGVuZWRDbGFzc05hbWUpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlTW9kYWxXaW5kb3dCdG4gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG4gICAgdGhpcy5fY2xvc2VNb2RhbFdpbmRvd0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudEhhbmRsZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcbiAgICAgICAgY3VycmVudEhhbmRsZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGZvcm1TZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9mb3JtID0gZG9jdW1lbnQuZm9ybXNbZm9ybVNlbGVjdG9yXTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbnB1dFwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5faW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAvLyBoZXJlIHlvdSBpbnNlcnQgdGhlIGB2YWx1ZWAgYnkgdGhlIGBuYW1lYCBvZiB0aGUgaW5wdXRcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldEZvcm0oKSB7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3N1Ym1pdFwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX3N1Ym1pdF9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcImZvcm1fX2Vycm9yLW1lc3NhZ2VfYWN0aXZlXCIsXG59O1xuIiwiaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgdmFsaWRhdGlvbkNvbmZpZywgcG9wdXBzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuY29uc3QgZWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXhwbG9yZXJfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgYWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5leHBsb3Jlcl9fYWRkLWJ1dHRvblwiKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXCIuZXhwbG9yZXJfX25hbWVcIiwgXCIuZXhwbG9yZXJfX2Rlc2NyaXB0aW9uXCIpO1xuXG4vLyBkZWZpbmUgYW4gb2JqZWN0IGZvciBzdG9yaW5nIHZhbGlkYXRvcnNcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcbiAgICAvLyBnZXQgdGhlIG5hbWUgb2YgdGhlIGZvcm1cbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gICAgLy8gc3RvcmUgdGhlIHZhbGlkYXRvciB1c2luZyB0aGUgYG5hbWVgIG9mIHRoZSBmb3JtXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbih2YWxpZGF0aW9uQ29uZmlnKTtcblxuLy9jcmVhdGluZyBjYXJkcyBmcm9tIHRoZSBhcnJheVxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIubW9kYWxfdHlwZV9zaG93LWltYWdlXCIpO1xuXG5jb25zdCBoYW5kbGVJbWFnZUNsaWNrID0gKGNhcmQpID0+IHtcbiAgcG9wdXBXaXRoSW1hZ2Uub3BlbihjYXJkLmxpbmssIGNhcmQubmFtZSk7XG59O1xucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgXCIuY2FyZFwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgICB9LFxuICB9LFxuICBcIi5jYXJkc19fbGlzdFwiXG4pO1xuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLy9jcmVhdGluZyBuZXcgY2FyZHMgYnkgZmlsbGluZyBvdXQgdGhlIGZvcm1cbmNvbnN0IHNhdmVOZXdDYXJkID0gKG5ld0NhcmQpID0+IHtcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcbiAgYWRkQ2FyZFBvcHVwLnJlc2V0Rm9ybSgpO1xuICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJjYXJkLWZvcm1cIl0uZGlzYWJsZUJ1dHRvbigpO1xufTtcblxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiLm1vZGFsX3R5cGVfYWRkLWNhcmRcIixcbiAgXCJjYXJkLWZvcm1cIixcbiAgc2F2ZU5ld0NhcmRcbik7XG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRDYXJkUG9wdXAub3BlbigpO1xufSk7XG5cbi8vY2FobmdpbmcgcHJvZmlsZSBkZXRhaWxzXG5mdW5jdGlvbiBzYXZlUHJvZmlsZUNoYW5nZXMobmV3VXNlckRhdGEpIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8obmV3VXNlckRhdGEpO1xuICBwcm9maWxlRWRpdFBvcHVwLmNsb3NlKCk7XG59XG5cbmNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIubW9kYWxfdHlwZV9wcm9maWxlXCIsXG4gIFwicHJvZmlsZS1mb3JtXCIsXG4gIHNhdmVQcm9maWxlQ2hhbmdlc1xuKTtcbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGNvbnN0IGN1cnJlbnREYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZUVkaXRQb3B1cC5zZXRJbnB1dFZhbHVlcyhjdXJyZW50RGF0YSk7XG4gIHByb2ZpbGVFZGl0UG9wdXAub3BlbigpO1xufSk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3Rvcikge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgbmFtZSA9IHRoaXMuX25hbWUudGV4dENvbnRlbnQ7XG4gICAgY29uc3QgYWJvdXQgPSB0aGlzLl9hYm91dC50ZXh0Q29udGVudDtcbiAgICBjb25zdCB1c2VySW5mbyA9IHsgbmFtZSwgYWJvdXQgfTtcbiAgICByZXR1cm4gdXNlckluZm87XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl9pbWFnZUxhYmxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtbGFibGVcIik7XG4gIH1cblxuICBvcGVuKGxpbmssIG5hbWUpIHtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5faW1hZ2VMYWJsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHRhcmdldE5vZGVTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7IC8vc2hvdWxkIGJlIGFycmF5XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgLy9mdW5jdGlvblxuICAgIHRoaXMuX3RhcmdldE5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldE5vZGVTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLmFkZEl0ZW0oaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIHRoaXMuX3RhcmdldE5vZGUucHJlcGVuZChpbnN0YW5jZSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIm5hbWUiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiZ2VuZXJhdGVDYXJkIiwiX2VsZW1lbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ0ZXh0Q29udGVudCIsIl9jYXJkSW1hZ2VFbGVtZW50Iiwic3JjIiwiYWx0IiwiX2NhcmRMaWtlQnV0dG9uIiwiX2NhcmREZWxldGVCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja1ZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJkaXNhYmxlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaGFuZGxlSW5wdXQiLCJmb3JFYWNoIiwiYmluZCIsImN1cnJlbnRIYW5kbGUiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVzZXRWYWxpZGF0aW9uIiwiUG9wdXAiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9tb2RhbElzT3BlbmVkQ2xhc3NOYW1lIiwiX2VzY1ByZXNzZWQiLCJfbGlzdGVuZXJTZXQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2xvc2VNb2RhbFdpbmRvd0J0biIsImV2ZW50IiwidGFyZ2V0IiwiY29udGFpbnMiLCJrZXkiLCJmb3JtU2VsZWN0b3IiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfZm9ybSIsImZvcm1zIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0Rm9ybSIsInJlc2V0IiwiZWRpdEJ0biIsImFkZEJ0biIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25TZWxlY3RvciIsIl9uYW1lIiwiX2Fib3V0IiwiZ2V0VXNlckluZm8iLCJhYm91dCIsInNldFVzZXJJbmZvIiwiZm9ybVZhbGlkYXRvcnMiLCJ2YWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJwb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl9pbWFnZUxhYmxlIiwiY2FyZCIsImNhcmRTZWN0aW9uIiwidGFyZ2V0Tm9kZVNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl90YXJnZXROb2RlIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImluc3RhbmNlIiwicHJlcGVuZCIsIkNhcmQiLCJhZGRDYXJkUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwibmV3Q2FyZCIsInByb2ZpbGVFZGl0UG9wdXAiLCJuZXdVc2VyRGF0YSIsImN1cnJlbnREYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==